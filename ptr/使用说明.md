# ptr 包使用说明

## 概述

`ptr` 包提供了一系列工具函数，用于创建各种类型的指针。这在需要传递指针参数但只有值的情况下非常有用。

## 功能特性

- 支持所有基本数据类型的指针创建
- 简洁易用的API设计
- 完整的测试覆盖
- 良好的文档注释

## 支持的函数

### 字符串类型
- `String(s string) *string` - 创建字符串指针

### 整数类型
- `Int(i int) *int` - 创建int指针
- `Int8(i int8) *int8` - 创建int8指针
- `Int16(i int16) *int16` - 创建int16指针
- `Int32(i int32) *int32` - 创建int32指针
- `Int64(i int64) *int64` - 创建int64指针

### 无符号整数类型
- `Uint(u uint) *uint` - 创建uint指针
- `Uint8(u uint8) *uint8` - 创建uint8指针
- `Uint16(u uint16) *uint16` - 创建uint16指针
- `Uint32(u uint32) *uint32` - 创建uint32指针
- `Uint64(u uint64) *uint64` - 创建uint64指针

### 浮点数类型
- `Float32(f float32) *float32` - 创建float32指针
- `Float64(f float64) *float64` - 创建float64指针

### 其他基本类型
- `Bool(b bool) *bool` - 创建bool指针
- `Byte(b byte) *byte` - 创建byte指针
- `Rune(r rune) *rune` - 创建rune指针

### 复数类型
- `Complex64(c complex64) *complex64` - 创建complex64指针
- `Complex128(c complex128) *complex128` - 创建complex128指针

### 时间类型
- `Time(t time.Time) *time.Time` - 创建time.Time指针
- `Duration(d time.Duration) *time.Duration` - 创建time.Duration指针

## 使用示例

```go
package main

import (
    "fmt"
    "time"
    "your-module/ptr"
)

func main() {
    // 基本类型指针创建
    strPtr := ptr.String("hello")
    intPtr := ptr.Int(42)
    boolPtr := ptr.Bool(true)
    
    fmt.Printf("String: %s\n", *strPtr)
    fmt.Printf("Int: %d\n", *intPtr)
    fmt.Printf("Bool: %t\n", *boolPtr)
    
    // 浮点数指针创建
    floatPtr := ptr.Float64(3.14)
    fmt.Printf("Float: %f\n", *floatPtr)
    
    // 时间指针创建
    now := time.Now()
    timePtr := ptr.Time(now)
    fmt.Printf("Time: %v\n", *timePtr)
    
    // 在函数调用中使用
    processString(strPtr)
    processInt(intPtr)
}

func processString(s *string) {
    fmt.Printf("Processing string: %s\n", *s)
}

func processInt(i *int) {
    fmt.Printf("Processing int: %d\n", *i)
}
```

## 常见使用场景

### 1. API参数传递
当API需要指针参数但只有值时：
```go
// 不使用ptr包
var age int = 25
user := &User{
    Name: "John",
    Age:  &age,  // 需要先声明变量
}

// 使用ptr包
user := &User{
    Name: "John",
    Age:  ptr.Int(25),  // 直接创建指针
}
```

### 2. 结构体字段初始化
```go
type Config struct {
    Port     *int
    Host     *string
    Timeout  *time.Duration
    Debug    *bool
}

config := &Config{
    Port:    ptr.Int(8080),
    Host:    ptr.String("localhost"),
    Timeout: ptr.Duration(30 * time.Second),
    Debug:   ptr.Bool(true),
}
```

### 3. 可选参数处理
```go
func CreateUser(name string, age *int, email *string) *User {
    user := &User{Name: name}
    if age != nil {
        user.Age = *age
    }
    if email != nil {
        user.Email = *email
    }
    return user
}

// 调用时
user1 := CreateUser("Alice", ptr.Int(30), ptr.String("alice@example.com"))
user2 := CreateUser("Bob", nil, nil)  // 不提供可选参数
```

## 运行测试

```bash
cd ptr
go test -v
```

## 注意事项

1. 这些函数返回的指针指向传入值的副本，不是原始值
2. 适用于需要指针但只有值的场景
3. 对于大型结构体，建议直接使用指针而不是通过ptr包创建
4. 所有函数都是线程安全的

## 性能考虑

- 这些函数都是简单的指针创建操作，性能开销极小
- 适合在需要频繁创建指针的场景中使用
- 对于性能敏感的应用，可以考虑内联这些简单的操作
